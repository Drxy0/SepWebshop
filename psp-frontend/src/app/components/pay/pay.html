<div class="p-10 text-center min-h-screen bg-gray-50 flex flex-col items-center">
  <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-md w-full max-w-sm">
    <div class="space-y-3">
      <h2 class="text-lg font-bold text-gray-800 mb-4">Checkout</h2>
      <p class="text-sm font-medium text-gray-600 mb-2">Select payment method:</p>

      <div *ngIf="isLoadingMethods()" class="py-8 flex flex-col items-center space-y-2">
        <div
          class="w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"
        ></div>
        <p class="text-xs text-gray-400 animate-pulse">Fetching available methods...</p>
      </div>

      <ng-container *ngIf="!isLoadingMethods()">
        <button
          *ngFor="let method of availableMethods()"
          (click)="onPay(method)"
          [disabled]="isProcessingPayment()"
          class="w-full py-3 px-4 bg-gray-50 border border-gray-200 rounded-lg text-gray-700 font-bold hover:bg-blue-600 hover:text-white hover:border-blue-600 transition-all flex justify-between items-center disabled:opacity-70 disabled:cursor-not-allowed group"
        >
          <span>{{ method }}</span>

          <ng-container *ngIf="isProcessingPayment() && selectedMethod() === method; else arrow">
            <div
              class="w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin text-blue-600 group-hover:text-white"
            ></div>
          </ng-container>

          <ng-template #arrow>
            <span class="text-lg group-hover:translate-x-1 transition-transform">→</span>
          </ng-template>
        </button>

        <div
          *ngIf="availableMethods().length === 0"
          class="p-4 bg-red-50 rounded-lg text-red-500 text-sm border border-red-100"
        >
          No payment methods available for this merchant.
        </div>
      </ng-container>
    </div>
  </div>

  <div class="mt-6 flex items-center space-x-2">
    <span class="text-green-500 text-xs">●</span>
    <p class="text-xs text-gray-400 font-mono italic">Secure Checkout Powered by PSP</p>
  </div>
</div>
