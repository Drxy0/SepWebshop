<h2 class="text-2xl font-bold mb-6 text-gray-800">Register New Car</h2>

<div
  *ngIf="message()"
  [ngClass]="
    messageType() === 'success' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'
  "
  class="p-4 rounded-xl mb-6 text-sm font-medium"
>
  {{ message() }}
</div>

<form [formGroup]="form" (ngSubmit)="submit()" class="space-y-5">
  <div>
    <label class="block text-xs font-bold uppercase text-gray-500 mb-2">Brand & Model</label>
    <input
      type="text"
      formControlName="brandAndModel"
      placeholder="e.g. BMW M5"
      class="w-full border-2 rounded-xl px-4 py-2.5 focus:border-blue-500 focus:ring-0 outline-none transition"
      [ngClass]="{
        'border-red-500': form.get('brandAndModel')?.invalid && form.get('brandAndModel')?.touched
      }"
    />
    <p
      *ngIf="form.get('brandAndModel')?.invalid && form.get('brandAndModel')?.touched"
      class="text-red-500 text-xs mt-1"
    >
      Brand and model is required.
    </p>
    <p *ngFor="let err of fieldErrors()['BrandAndModel']" class="text-red-500 text-xs mt-1">
      {{ err }}
    </p>
  </div>

  <div class="grid grid-cols-2 gap-4">
    <div>
      <label class="block text-xs font-bold uppercase text-gray-500 mb-2">Year</label>
      <input
        type="number"
        formControlName="year"
        class="w-full border-2 rounded-xl px-4 py-2.5 focus:border-blue-500 focus:ring-0 outline-none transition"
        [ngClass]="{ 'border-red-500': form.get('year')?.invalid && form.get('year')?.touched }"
      />
      <p
        *ngIf="form.get('year')?.invalid && form.get('year')?.touched"
        class="text-red-500 text-xs mt-1"
      >
        Invalid year.
      </p>
      <p *ngFor="let err of fieldErrors()['Year']" class="text-red-500 text-xs mt-1">{{ err }}</p>
    </div>

    <div>
      <label class="block text-xs font-bold uppercase text-gray-500 mb-2">Daily Price</label>
      <input
        type="number"
        formControlName="price"
        class="w-full border-2 rounded-xl px-4 py-2.5 focus:border-blue-500 focus:ring-0 outline-none transition"
        [ngClass]="{ 'border-red-500': form.get('price')?.invalid && form.get('price')?.touched }"
      />
      <p
        *ngIf="form.get('price')?.invalid && form.get('price')?.touched"
        class="text-red-500 text-xs mt-1"
      >
        Price is required.
      </p>
      <p *ngFor="let err of fieldErrors()['Price']" class="text-red-500 text-xs mt-1">{{ err }}</p>
    </div>
  </div>

  <div>
    <label class="block text-xs font-bold uppercase text-gray-500 mb-2">Plate Number</label>
    <input
      type="text"
      formControlName="plateNumber"
      placeholder="BG-1234-XX"
      class="w-full border-2 rounded-xl px-4 py-2.5 focus:border-blue-500 focus:ring-0 outline-none transition text-center font-mono tracking-widest"
      [ngClass]="{
        'border-red-500': form.get('plateNumber')?.invalid && form.get('plateNumber')?.touched
      }"
    />
    <p
      *ngIf="form.get('plateNumber')?.invalid && form.get('plateNumber')?.touched"
      class="text-red-500 text-xs mt-1"
    >
      Plate number is required.
    </p>
    <p *ngFor="let err of fieldErrors()['PlateNumber']" class="text-red-500 text-xs mt-1">
      {{ err }}
    </p>
  </div>

  <button
    type="submit"
    [disabled]="loading()"
    class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold hover:bg-blue-700 disabled:opacity-50 transition shadow-xl shadow-blue-100 mt-4 flex items-center justify-center"
  >
    <span *ngIf="!loading()">Confirm and Add</span>
    <span *ngIf="loading()" class="flex items-center"> Processing... </span>
  </button>
</form>
